\section{Solución implementada}

Se implementaron tres casos de uso sobre los distintos ecosistemas a analizar. Se detalla el camino recorrido para llegar a cada implementación, haciendo uso de las distintas herramientas presentes en cada ecosistema para lograr cumplir con los requisitos funcionales presentados a continuación. Por último, presentamos un análisis cualitativo y cuantitativo de las ventajas y desventajas de cada caso dependiendo del ecosistema.

\subsection{Casos de uso}

\subsubsection{Sitio web informativo}

Este caso de uso consiste en desplegar un sitio o aplicación web, para poder recuperarlo utilizando un navegador. Es uno de los casos más sencillos y sirve como introducción para familiarizarse con cada ecosistema.

\paragraph{Requisitos funcionales}

\begin{itemize}
    \item \textbf{Landing page del proyecto}: sitio web informativo donde se presente información sobre este proyecto, los casos de uso y sus ecosistemas de despliegue.
\end{itemize}

\subsubsection{Repositorio de conocimiento}

Esta caso representa un repositorio con diferentes artículos, similar a \textit{Wikipedia}. Es un servicio comunitario en donde se puede agregar información de distinta índole. Con este caso se analizó la capacidad de creación, modificación y recuperación de contenido por parte de los usuarios.

\paragraph{Requisitos funcionales}

\begin{itemize}
    \item \textbf{Edición:} los artículos dentro del repositorio deben poder editarse por cualquier persona que ingrese al sitio, y este cambio debe verse reflejado eventualmente en las demás personas que accedan a ese artículo.
    \item \textbf{Historial de versiones:} cada artículo debe tener una lista de versiones anteriores, junto con hipervínculos con los cuáles acceder a ellas.
    \item \textbf{Búsqueda:} una persona debe poder realizar una búsqueda global que incluya todos los artículos.
\end{itemize}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.5\linewidth]{img/solucion-wiki/usm-wiki.jpg}
    \caption{\textit{User Story Map} del repositorio de conocimiento}
    \label{fig:usm-wiki}
\end{figure}

\subparagraph{Package}

Este caso de uso se implementó en los packages \textbf{Astrawiki} \cite{astrawiki-ipfs} (implementación sobre el ecosistema IPFS) y \textbf{Astrawiki-eth} \cite{astrawiki-eth} (implementación sobre el ecosistema Blockchain). En las subsiguientes secciones, las menciones a Astrawiki referirán a este caso de uso.

\subsubsection{Mensajero en tiempo real}

Este caso se enfoca en la capacidad de la infraestructura de enfrentarse a situaciones de \textit{tiempo real} como puede ser un chat de texto o de audio. En particular, nos centramos en el caso de chats de texto para un grupo de usuarios en donde los mensajes sean públicos.

\paragraph{Requisitos funcionales}

\begin{itemize}
    \item \textbf{Usuarios:} se deben contar con usuarios que puedan iniciar sesión con una clave.
    \item \textbf{Grupos públicos:} grupos de chat de texto, donde cualquier usuario puede ingresar y ver los mensajes del resto, así como también participar enviando sus propios mensajes.
    \item \textbf{Respuestas:} un usuario debe poder responder mensajes anteriores dentro de un mismo chat.
\end{itemize}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.5\linewidth]{img/usm-mensajero.jpg}
    \caption{\textit{User Story Map} del mensajero en tiempo real}
    \label{fig:enter-label}
\end{figure}

\subparagraph{Package}

Este caso de uso se implementó en los \textit{packages} \textbf{Astrachat}\cite{astrachat-ipfs} (implementación sobre el ecosistema IPFS) y \textbf{Astrachat-eth}\cite{astrachat-eth} (implementación sobre el ecosistema Blockchain). En las subsiguientes secciones, las menciones a Astrachat referirán a este caso de uso.

\subsection{Proceso de descubrimiento}

Durante la implementación de los casos de uso para cada ecosistema, se fue desarrollando un mejor entendimiento de lo que se estaba creando. Logrando así generar distintas abstracciones que representan la infraestructura general para la implementación de los casos de uso.

Para cada ecosistema hay 2 principales infraestructuras en acción. La infraestructura de despliegue y la infraestructura de aplicación.

La \textbf{infraestructura de despliegue} es la encargada del \textit{hosting} de una aplicación web. Con esta se distribuye y permite el acceso a lo que es el \textit{front-end} de las aplicaciones, como también el código para el funcionamiento de la aplicación, si se trata de una aplicación no estática. Cualquier aplicación que desee ser accedida por la web va a hacer uso de esta infraestructura, como es el caso del sitio web informativo.

La \textbf{infraestructura de aplicación} es la encargada de la lógica de la aplicación, como es el almacenamiento de datos, como la conexión entre pares. Aplicaciones que requieran de mantener un estado y permitir la modificación de parte de los usuarios van a necesitar hacer uso de esta infraestructura, como es el caso del repositorio de conocimiento y mensajero en tiempo real.

% TODO: (Mover a IPFS esto, ya que no se hicieron abstracciones en blockchain)
Al lograr encontrar estas abstracciones, se permite que generar nuevos casos de uso sea mucho más fácil, ya que la mayoría de la lógica sobre el el ecosistema se encuentra encapsulada dentro de ellas, logrando que el desarrollo de un nuevo caso de uso se concentre únicamente en sus requisitos y no en el ecosistema en el que se encuentra.

A continuación se va a explicar como se componen y funcionan ambas infraestructuras en cada ecosistema.

% TODO: (Explicar que lo que hicimos son packages)

\input{tex/8a.solucion-ipfs}
\input{tex/8b.solucion-blockchain}
\input{tex/8c.solucion-hyphanet-freenet}

% \newpage

\subsection{Front-end}

% TODO: Mostrar un diagrama de cómo todos los paquetes de bitxenia se utilizan e interactuan entre sí para que el front-end los termine usando. 

Como prueba de la versatilidad de los ecosistemas, y aprovechando la creación de paquetes, se desarrollaron diferentes front-ends para las aplicaciones realizadas.

\paragraph{Astraweb}

El principal front-end que contiene el repositorio de conocimiento y a su vez el mensajero en tiempo real. Además, posee la opción de escoger el ecosistema al que se desea conectar.

\begin{figure}[H]
    \centering
    \includegraphics[width=1\linewidth]{img/astraweb-main-page.png}
    \caption{Página principal de Astraweb}
    \label{fig:astraweb-main-page}
\end{figure}

\subparagraph{Tecnología} Se utilizó \texttt{React} \cite{react} y \texttt{Next.js} \cite{next} como \textit{frameworks} para la creación de la aplicación web, basándonos en una plantilla llamada \texttt{rubix-documents} \cite{rubix}. El código fue escrito en \texttt{Typescript}.

\subparagraph{Servidor ejemplo} Se desarrolló una solución centralizada como tercer ecosistema para este frontend, con dos propósitos:
\begin{enumerate}
    \item Paralelizar el desarrollo del front-end y los distintos paquetes de cada ecosistema. Debido a que se definió una interfaz común tanto para el repositorio de conocimiento como para el mensajero en tiempo real, se logró avanzar con el front-end haciendo pruebas manuales con este servidor.
    \item Comparar las implementaciones descentralizadas contra un enfoque centralizado.
\end{enumerate}
El servidor fue creado en \texttt{Node.js} con \texttt{Express.js} como framework para interactuar con \textit{requests} de HTTP.

\subparagraph{Limitaciones} Debido a la falta de un servidor tradicional para ofrecer el contenido, el uso de \textit{Server Components} o componentes de servidor \cite{server-components} no era posible. Esto implicó modificar ampliamente la plantilla utilizada para descartar este tipo de componentes en favor de aquellos que pueden ser compilados y luego utilizados por el cliente sin interacción con un servidor.

\paragraph{Astrawiki CLI}

Front-end de terminal, desarrollado para el caso de uso del repositorio de conocimiento y para el ecosistema de IPFS en específico. Cuenta con todas las funcionalidades del repositorio de conocimiento, como crear, editar y ver artículos, consultar versiones pasadas, e incluso colaborar, lo cual se verá en el apartado de IPFS. Además, cuenta con un contenedor \texttt{Docker} publicado, con el fin de fácilmente iniciar un nodo sin necesitar una instalación de \texttt{Node} y demás dependencias. Funciona como un \texttt{daemon} \cite{daemon}, es decir, se inicia y funciona en segundo plano hasta que se indique lo contrario.

Su propósito es, por un lado demostrar la versatilidad del modelo de paquetes utilizado para crear distintos front-ends. Y por otro lado, el contenedor es útil para el nodo colaborador desarrollado para IPFS visto previamente.

\subparagraph{Arquitectura} Se compone de un cliente, el cuál se inicia con cada comando (\texttt{start}, \texttt{add}, \texttt{get}, \texttt{edit}, \texttt{list}, etc.) y un servidor que se ejecuta por detrás, el cual inicia la instancia del repositorio de conocimiento de IPFS y utiliza su API cuando recibe \texttt{requests HTTP}.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.7\linewidth]{img/astrawiki-cli.png}
    \caption{Ejemplo de uso de \texttt{astrawiki-cli}}
    \label{fig:astrawiki-cli}
\end{figure}

\paragraph{Astrachat CLI}

Frontend de terminal, desarrollado para el caso de uso de mensajero en tiempo real y para el ecosistema de Blockchain.

\begin{figure}[H]
    \centering
    \includegraphics[width=1\linewidth]{img/astrachat-cli-main-page.png}
    \caption{Página principal de \texttt{astrachat-cli}}
    \label{fig:astrachat-cli-main-page}
\end{figure}

\subparagraph{Tecnología}

Se utilizó \texttt{React} \cite{react} y \texttt{Ink} \cite{ink} como \textit{frameworks} para crear la interfaz de este frontend.

\subparagraph{Limitaciones}

Debido a que se ejecuta en la terminal no es posible hacer uso de una wallet como Metamask \cite{metamask} ya que la misma sólo funciona en web. Debido a esto, se \textit{hardcodearon} algunas de las wallets que provee Hardhat \cite{hardhat}.